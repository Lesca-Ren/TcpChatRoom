# 遇到的困难

- 好友列表跟随登录的用户变化？

  为了模拟出真实的用户场景，好友列表功能必须能跟随登录用户的不同而产生变化。
  
  具体的实现是：用户登录->向服务器发送获取好友列表请求->接收服务器发回的好友列表信息->
  
  根据信息生成好友列表->更新好友头像及在线状态信息
  
  在这个过程中，定时器功能被广泛应用。为了能实时更新好友头像及在线状态信息，每隔1s定时器就会启动，向服务器发送获取用户头像及状态信息的请求，再在软件上显示出来。
  
- 用户注册时不能用中文？

  开始我以为是，将中文通过客户端的输入框，将用户名经TCP发送给服务器，在发送和接收的过程中没有将字符集设置为utf8，在调试时发现，输入的中文在服务器端能正确显示出来，所以就考虑是不是Mysql操作函数的问题，最后发现要将mysql_query()设置为utf8字符集才能识别中文。